{% extends "base.html" %}

{% block title %}Checkout - Protein Perks{% endblock %}

{% block content %}

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

  <h1 class="text-4xl font-bold text-gray-900 mb-8">Checkout</h1>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

    <!-- Customer Form -->
    <div class="bg-white rounded-lg shadow-md p-8">

      <h2 class="text-2xl font-bold text-gray-900 mb-6">
        Shipping Details
      </h2>

      <form id="checkout-form">

        <div class="space-y-4">

          <input name="name" placeholder="Full Name" required class="w-full p-2 border rounded">

          <input type="email" name="email" placeholder="Email" required class="w-full p-2 border rounded">

          <input name="phone" placeholder="Phone" required pattern="[0-9]{10}" class="w-full p-2 border rounded">

          <textarea name="address" placeholder="Address" required class="w-full p-2 border rounded"></textarea>

          <div class="grid grid-cols-2 gap-4">

            <input name="city" placeholder="City" required class="w-full p-2 border rounded">

            <input name="state" placeholder="State" required class="w-full p-2 border rounded">

          </div>

          <input name="pincode" placeholder="Pincode" required pattern="[0-9]{6}" class="w-full p-2 border rounded">

        </div>

        <button
          id="pay-button"
          type="submit"
          class="w-full mt-6 bg-indigo-600 text-white py-3 rounded font-semibold">

          Pay ₹{{ total }}

        </button>

      </form>

    </div>


    <!-- Summary -->
    <div class="bg-white shadow-md p-8 rounded">

      <h2 class="text-2xl font-bold mb-6">Order Summary</h2>

      {% for item in cart_items %}

      <div class="flex justify-between border-b py-2">

        <div>
          <b>{{ item.product.name }}</b><br>
          Qty: {{ item.quantity }}
        </div>

        <div>₹{{ item.subtotal }}</div>

      </div>

      {% endfor %}

      <div class="mt-4 text-xl font-bold flex justify-between">

        <span>Total</span>
        <span>₹{{ total }}</span>

      </div>

    </div>

  </div>

</div>

{% endblock %}


{% block extra_scripts %}

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script src="/static/js/checkout.js"></script>

<script>
const totalAmount = Number("{{ total }}");
const razorpayKeyId = "{{ razorpay_key_id }}";
</script>


{% endblock %}
